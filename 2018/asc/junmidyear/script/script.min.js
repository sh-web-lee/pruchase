var scrollTop,wh=$(window).height(),div=$(".animate");function Totarget(e,t){var a=e.offset().top-t;$("html,body").animate({scrollTop:a},"slow")}function mask(e){if(1==e&&-1==maskTime)return!1;maskTime=-1,cSet("mask_t",maskTime),maskCount();var t=cGet("mask_e");null==t&&cSet("mask_e",t=Date.parse(new Date)+12e4),expireTimeCheck()&&($(".mask,.mask-box").css("display","block"),cycleCountdown(),(new TimelineLite).from(".mask-box",.5,{scale:0,autoAlpha:1}).to(".mask-box",1.1,{scale:1,autoAlpha:1}))}function maskCount(){$.ajax({type:"GET",url:"index.php",data:"ip=&action=maskCount&mask=1"})}function cutBack(){var e=4.02*(100-packs);TweenMax.to($(".progressbar"),5,{onStart:function(){$(".progressbar").animate({width:e+"px"},1e3),$(".counter").animate({left:e+"px"},1e3)}})}function fadeOut(e){e=void 0==e?0:parseInt(e),$(".gift-count").append("<i class='cut-box'>+"+e+"</i>"),$(".count-num-box").append("<i class='num-none'></i>"),(new TimelineLite).from(".cut-box",.5,{scale:.5,autoAlpha:0}).to(".cut-box",.8,{top:-10,autoAlpha:0,onComplete:function(){$(".gift-count .cut-box").remove(),$(".count-num").html(100-packs),$(".num-none").html($(".count-num").html()),$(".left-num").html(packs),TweenLite.to($(".num-none"),.5,{scale:3,autoAlpha:0,onComplete:function(){$(".count-num-box .num-none").remove()}})}})}function cutWidth(){var e=4.04*(100-packs);$(".progressbar").css("width",e+"px"),$(".counter").css("left",e+"px")}function soldOut(){TweenMax.to($(".cut-box"),3,{onStart:function(){$(".progressbar").animate({width:"400px"},3e3),$(".counter").animate({left:"400px"},3e3),function(){m=packs,clearInterval(e);var e=setInterval(function(){$(".count-num").html(m),$(".left-num").html(parseInt(100-m)),m++,m>100&&clearInterval(e)},28)}()},onComplete:function(){var e=MApp(2.2).url.getParameters("aff"),t=MApp(2.2).datetime.getTimeZone();$(".banner-boxshot").addClass("sold-out"),$(".defult").css("display","none"),$(".sold-out-banner").css("display","block"),$(".middle-buy").css("display","none"),$(".sold-out-bar").css("display","block"),$(".item-pro del").html("$89.97"),$(".table-peice").html("<span>75% OFF </span>Save $67.99"),$(".buy-btn").attr("href","https://www.iobit.com/buy.php?product=asc123pc2198&ref=asc3pc2198may2017"+refStr+"&aff="+e+"&refs=purchase_asc&tw="+t).attr("onclick","ga('send', 'event', 'asc3pcbuy', 'buy', 'ascpurchase-201705');clickCount(4)"),$("#floatlayer,.gotop").hide()}})}function cycleCountdown(){if(remainTime=expireTimeCheck(),remainTime>0){var e=remainTime%60<10?"0"+remainTime%60:remainTime%60,t=Math.floor(remainTime/60);$(".time-count i").eq(0).html("0"+t).end().eq(1).html(e),remainTime--,setTimeout("cycleCountdown(remainTime)",1e3)}else $(".mask,.mask-box").fadeOut()}function expireTimeCheck(){var e=cGet("mask_e");return Date.parse(new Date)<e&&(e-Date.parse(new Date))/1e3}function maskTimeCountDown(){maskTime>0?(109==maskTime&&$(document).bind("mousemove",mouseOut),80==maskTime&&$(document).unbind("mousemove",mouseOut),maskTime--,cSet("mask_t",maskTime),setTimeout("maskTimeCountDown()",1e3)):0==maskTime&&packs>0&&$(document).bind("mousemove",mouseMove)}function mouseOut(e){e.clientY<3&&(mask(1),$(document).unbind("mousemove",mouseOut))}function mouseMove(e){mask(1),$(document).unbind("mousemove",mouseMove)}function timeInit(){maskTime=cGet("mask_t"),null==maskTime&&(maskTime=120,cSet("mask_t",maskTime)),-1==maskTime&&expireTimeCheck()&&mask(),mouseCheck=0,maskTimeCountDown()}function cSet(e,t){var a=new Date;e+=a.getDate(),a.setTime(a.getTime()+3456e5),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()}function cGet(e){e+=(new Date).getDate();var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null}function countOut(){var e=MApp(2.2).url.getParameters("aff"),t=MApp(2.2).datetime.getTimeZone();$(".banner-boxshot").addClass("sold-out"),$(".defult").css("display","none"),$(".sold-out-banner").css("display","block"),$(".middle-buy").css("display","none"),$(".sold-out-bar").css("display","block"),$(".item-pro del").html("$89.97"),$(".table-peice").html("<span>75% OFF </span>Save $67.99"),$(".buy-btn").attr("href","https://www.iobit.com/buy.php?product=asc123pc2198&ref=asc3pc2198may2017"+refStr+"&aff="+e+"&refs=purchase_asc&tw="+t).attr("onclick","ga('send', 'event', 'asc3pcbuy', 'buy', 'ascpurchase-201705');clickCount(4)"),$("#floatlayer,.gotop").hide()}function getPacks(e){var t=new Date;$.ajax({type:"GET",url:"index.php",data:"action=getPacks&r="+Math.random()+"&d="+t.getDate()+(1==e?"&f=1":""),success:function(e){var t=(e=JSON.parse(e)).packsNum,a=e.viewNum;$(".view-num").html(a);var o=packs-t;o>0&&(fadeOut(o),cutWidth(packs)),packs=t,packs>0?setTimeout("getPacks()",15e3):(countOut(),$(document).unbind("mousemove",mouseMove))}})}function packsInit(){(packs=cGet("ascmaymid"),null==packs&&(packs=64),0==packs)?soldOut():(cutBack(),1!=cGet("isf")?(cSet("isf",1),setTimeout("getPacks(1)",1e3)):setTimeout("getPacks()",15e3));$(".count-num").html(100-packs),$(".left-num").html(packs)}function clickCount(e){$.ajax({type:"GET",url:"index.php",data:"ip=&action=maskCount&mask="+e})}div.each(function(){var e=$(this).offset().top;$(this).attr("offSetTop",e),$(this).on("show",function(){var e=$(this).attr("offSetTop");scrollTop=$(window).scrollTop(),e<wh+scrollTop&&($(this).hasClass("active")||$(this).addClass("active"))})}),$(window).on("scroll",function(){div.each(function(){$(this).trigger("show")})}),$(window).resize(function(){wh=$(window).height()}),$(".review .handle li").hover(function(){$(this).addClass("active").siblings().removeClass("active"),$(".review .reviews").eq($(this).index()).addClass("active").siblings().removeClass("active")}),$(window).on("scroll",function(){var e=$(".banner .buy-btn").offset().top;$(window).scrollTop()>e?($("#floatlayer").addClass("on"),$(".gotop").fadeIn()):($("#floatlayer").removeClass("on"),$(".gotop").fadeOut())}),$("#floatlayer .close").on("click",function(){$("#floatlayer").hide()}),$(".close-msg,.close").on("click",function(){$(".mask,.mask-box").fadeOut()}),window.onload=function(){counterRight=144},$(function(){scrollBefore=0,dateNow=(new Date).getDate(),timeInit(),packsInit()});